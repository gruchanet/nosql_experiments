[&#8810;](../exercise1.md) powrót

## Rozwiązanie <b>Zadania 1c</b>

| Database		| Convert time	| Done by			|
| ------------- |:-------------:|:------------------:
| MongoDB		| 35m15s		| PHP script		|
| PostgreSQL 	| 1h08m05s		| SQL Alter Command	|

<br />

<h4 id="mongodb">MongoDB<h5>

Konwersji pola <b>Tags</b> dla wszystkich 6034195 dokumentów<br />
dokonałem za pomocą napisanego przeze mnie [skryptu PHP](./mongo_script/script.php).

##### Wyniki są następujące:

> Uruchomiono na bazie <b>experiment</b> dla kolekcji <b>train</b><br /><br />
> <b>Calkowity czas wykonania (brutto):</b> 2115.1714000702 sek.<br />
> <b>Czas wykonania samego skryptu (netto):</b> 2115.1401998997 sek.<br />
> <b>Ilosc wszystkich tagow:</b> 17409994<br />
> <b>Ilosc roznych tagow:</b> 42049<br />
> <b>Ilosc unikalnych tagow (1-time):</b> 2663<br />
> <b>Najbardziej popularne tagi:</b> c#(463526), java(412189), php(392451)<br />
> <b>Przykladowy unikalny tag:</b> modman<br />
> <b>Skrypt wykonano dla:</b> 6034195 dokumentów<br />

##### Obserwacje

Podczas wykonywania skryptu zużycie pamięci wahało sie w granicach 4GB do 4.5GB pamięci.

<br />

<h4 id="postgresql">PostgreSQL<h5>

<b>Zapytanie</b>

	ALTER TABLE "train" 
	ALTER "tags" TYPE TEXT[]
	USING string_to_array(tags, ' ');
	
	Czas: 1283432.423 ms

##### Obserwacje

Wykonywanie zapytania na bazie przebiegało znacznie sprawniej, aniżeli w przypadku użycia sterownika do MongoDB - oszczędne zużycie zasobów komputera (1.5GB do 2GB).

#### KONKLUZJA:

Moim zdaniem, konwersja typu dla pola <b>Tags</b> przebiegło sprawniej dla bazy <b>PostgreSQL</b> z kilku powodów:
* użycie drivera dla <b>MongoDB</b> vs. użycie zapytania w <b>PostgreSQL</b>
* <b>(MongoDB)</b> iterowanie kursorem po każdym dokumencie w kolekcji i zapisywanie osobno każdego z nich do bazy
* <b>(PostgreSQL)</b> dodatkowe operacje wykonywane w [skrypcie PHP](./mongo_script/script.php) - zapisywanie wystąpień poszczególnych tagów